@using Project3.Repository
@using Project3.DTO
@model int;
@inject IRecipeRepository recipeRepository;
@inject ICategoryRepository categoryRepository;

@{
    Layout = "~/Views/Shared/_Layoutweb.cshtml";
    List<RecipeDetailDTO> latestrecipe = await recipeRepository.GetLatestCreatedRecipes(8);
    List<RecipeDetailDTO> allrecipe = await recipeRepository.GetRecipesByCategoryId(Model);
    var category = categoryRepository.FindById(Model);
    var i = 0;

}
<div data-elementor-type="wp-post" data-elementor-id="1220" class="elementor elementor-1220">
    <section class="elementor-section elementor-top-section elementor-element elementor-element-e3dc6de elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="e3dc6de" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;slideshow&quot;,&quot;background_slideshow_gallery&quot;:[{&quot;id&quot;:1235,&quot;url&quot;:&quot;http:\/\/point.moxcreative.com\/yumma\/wp-content\/uploads\/sites\/2\/2022\/04\/concept-of-tasty-food-with-bell-pepper-on-white-background.jpg&quot;},{&quot;id&quot;:1233,&quot;url&quot;:&quot;http:\/\/point.moxcreative.com\/yumma\/wp-content\/uploads\/sites\/2\/2022\/04\/flat-lay-with-takeaway-food-on-wooden-background-food-delivery.jpg&quot;},{&quot;id&quot;:1231,&quot;url&quot;:&quot;http:\/\/point.moxcreative.com\/yumma\/wp-content\/uploads\/sites\/2\/2022\/04\/chinese-food-white-background.jpg&quot;}],&quot;background_slideshow_lazyload&quot;:&quot;yes&quot;,&quot;background_slideshow_ken_burns&quot;:&quot;yes&quot;,&quot;background_slideshow_loop&quot;:&quot;yes&quot;,&quot;background_slideshow_slide_duration&quot;:5000,&quot;background_slideshow_slide_transition&quot;:&quot;fade&quot;,&quot;background_slideshow_transition_duration&quot;:500,&quot;background_slideshow_ken_burns_zoom_direction&quot;:&quot;in&quot;}">
        <div class="elementor-background-overlay" style="background-image: linear-gradient(180deg, #FFFFFF00 0%, #fdfdfc 100%);"></div>
        <div class="elementor-container elementor-column-gap-default">
            <div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-ce0c9ab" style="display: flex;justify-content: center;margin-bottom:180px" data-id="ce0c9ab" data-element_type="column">
                <div class="elementor-widget-wrap elementor-element-populated" style="text-align: center;width: 50%;display: flex;">
                    <div class="elementor-element elementor-element-0d9bbaa elementor-headline--style-rotate elementor-widget elementor-widget-animated-headline" data-id="0d9bbaa" data-element_type="widget" data-settings="{&quot;headline_style&quot;:&quot;rotate&quot;,&quot;animation_type&quot;:&quot;slide&quot;,&quot;rotating_text&quot;:&quot;Boiled\nSteamed\nFried\nBaked&quot;,&quot;loop&quot;:&quot;yes&quot;,&quot;rotate_iteration_delay&quot;:2500}" data-widget_type="animated-headline.default">
                        <div class="elementor-widget-container" style="margin-top:100px">
                            <link rel="stylesheet" href="https://point.moxcreative.com/yumma/wp-content/plugins/elementor-pro/assets/css/widget-animated-headline.min.css">		<h1 class="elementor-headline elementor-headline-animation-type-slide">
                                <span class="elementor-headline-dynamic-wrapper elementor-headline-text-wrapper">
                                    <span class="elementor-headline-dynamic-text elementor-headline-text-active" style="color:#d54215">
                                        Boiled
                                    </span>
                                    <span class="elementor-headline-dynamic-text" style="color:#d54215">
                                        Steamed
                                    </span>
                                    <span class="elementor-headline-dynamic-text" style="color:#d54215">
                                        Fried
                                    </span>
                                    <span class="elementor-headline-dynamic-text" style="color:#d54215">
                                        Baked
                                    </span>
                                </span>
                            </h1>
                        </div>
                    </div>
                    <div class="elementor-element elementor-element-512040f elementor-widget elementor-widget-heading" data-id="512040f" data-element_type="widget" data-widget_type="heading.default">
                        <div class="elementor-widget-container">
                            <h2 class="elementor-heading-title elementor-size-default">@category.Name</h2>
                        </div>
                    </div>
                    <div class="elementor-element elementor-element-c6a25fc elementor-widget elementor-widget-text-editor" data-id="c6a25fc" data-element_type="widget" data-widget_type="text-editor.default">
                        <div class="elementor-widget-container">
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut elit tellus, luctus nec ullamcorper mattis, pulvinar dapibus leo.</p>
                        </div>
                    </div>
                    <div class="elementor-element elementor-element-04555eb elementor-align-center elementor-widget elementor-widget-button" data-id="04555eb" data-element_type="widget" data-widget_type="button.default">
                        <div class="elementor-widget-container">
                            <div class="elementor-button-wrapper">
                                <a class="elementor-button elementor-button-link elementor-size-lg" href="#">
                                    <span class="elementor-button-content-wrapper">
                                        <span class="elementor-button-icon elementor-align-icon-right">
                                            <i aria-hidden="true" class="material-icons md-restaurant_menu" data-md-icon="restaurant_menu"></i>
                                        </span>
                                        <span class="elementor-button-text">Explore Recipes</span>
                                    </span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="elementor-section elementor-top-section elementor-element elementor-element-e0fd804 elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="e0fd804" data-element_type="section">
        <div class="elementor-container elementor-column-gap-default ">
            <div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-167ed45" data-id="167ed45" data-element_type="column">
                <div class="elementor-widget-wrap elementor-element-populated">
                    <section class="elementor-section elementor-inner-section elementor-element elementor-element-d25be84 elementor-section-content-middle elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="d25be84" data-element_type="section">
                        <div class="elementor-container elementor-column-gap-default">
                            <div class="elementor-column elementor-col-50 elementor-inner-column elementor-element elementor-element-a21452c elementor-invisible" data-id="a21452c" data-element_type="column" data-settings="{&quot;animation&quot;:&quot;fadeInLeft&quot;}">
                                <div class="elementor-widget-wrap elementor-element-populated">
                                    <div class="elementor-element elementor-element-bca8a19 elementor-widget elementor-widget-heading" data-id="bca8a19" data-element_type="widget" data-widget_type="heading.default">
                                        <div class="elementor-widget-container">
                                            <h3 class="elementor-heading-title elementor-size-default">All Recipe</h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="elementor-column elementor-col-50 elementor-inner-column elementor-element elementor-element-7c8d4ec elementor-invisible" data-id="7c8d4ec" data-element_type="column" data-settings="{&quot;animation&quot;:&quot;fadeInRight&quot;}">
                                <div class="elementor-widget-wrap elementor-element-populated">
                                    <div class="elementor-element elementor-element-749d236 elementor-align-right elementor-mobile-align-center elementor-widget elementor-widget-button" data-id="749d236" data-element_type="widget" data-widget_type="button.default">
                                        <div class="elementor-widget-container">
                                            <div class="elementor-button-wrapper">
                                                <a class="elementor-button elementor-button-link elementor-size-sm" href="#">
                                                    <span class="elementor-button-content-wrapper">
                                                        <span class="elementor-button-icon elementor-align-icon-right">
                                                            <i aria-hidden="true" class="material-icons md-call_made" data-md-icon="call_made"></i>
                                                        </span>
                                                        <span class="elementor-button-text">View more</span>
                                                    </span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section class="elementor-section elementor-inner-section elementor-element elementor-element-8e637d0 elementor-section-boxed elementor-section-height-default elementor-section-height-default elementor-invisible" data-id="8e637d0" data-element_type="section" data-settings="{&quot;animation&quot;:&quot;fadeInRight&quot;}">
                        <div class="elementor-container elementor-column-gap-default" style="margin-bottom:50px">
                            @for (int index = 0; index < allrecipe.Count; index++)
                            {
                                var recipe = allrecipe[index];
                                @await Component.InvokeAsync("RecipeByCategory", new { item = recipe })

                                @if ((index + 1) % 4 == 0)
                                {
                                    <div style="clear:both;"></div>
                                }
                            }
                        </div>
                        
                    </section>
                </div>
            </div>
        </div>
    </section>

    <section class="elementor-section elementor-top-section elementor-element elementor-element-e0fd804 elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="e0fd804" data-element_type="section">
        <div class="elementor-container elementor-column-gap-default ">
            <div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-167ed45" data-id="167ed45" data-element_type="column">
                <div class="elementor-widget-wrap elementor-element-populated">
                    <section class="elementor-section elementor-inner-section elementor-element elementor-element-d25be84 elementor-section-content-middle elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="d25be84" data-element_type="section">
                        <div class="elementor-container elementor-column-gap-default">
                            <div class="elementor-column elementor-col-50 elementor-inner-column elementor-element elementor-element-a21452c elementor-invisible" data-id="a21452c" data-element_type="column" data-settings="{&quot;animation&quot;:&quot;fadeInLeft&quot;}">
                                <div class="elementor-widget-wrap elementor-element-populated">
                                    <div class="elementor-element elementor-element-bca8a19 elementor-widget elementor-widget-heading" data-id="bca8a19" data-element_type="widget" data-widget_type="heading.default">
                                        <div class="elementor-widget-container">
                                            <h3 class="elementor-heading-title elementor-size-default">Latest Recipes</h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="elementor-column elementor-col-50 elementor-inner-column elementor-element elementor-element-7c8d4ec elementor-invisible" data-id="7c8d4ec" data-element_type="column" data-settings="{&quot;animation&quot;:&quot;fadeInRight&quot;}">
                                <div class="elementor-widget-wrap elementor-element-populated">
                                    <div class="elementor-element elementor-element-749d236 elementor-align-right elementor-mobile-align-center elementor-widget elementor-widget-button" data-id="749d236" data-element_type="widget" data-widget_type="button.default">
                                        <div class="elementor-widget-container">
                                            <div class="elementor-button-wrapper">
                                                <a class="elementor-button elementor-button-link elementor-size-sm" href="#">
                                                    <span class="elementor-button-content-wrapper">
                                                        <span class="elementor-button-icon elementor-align-icon-right">
                                                            <i aria-hidden="true" class="material-icons md-call_made" data-md-icon="call_made"></i>
                                                        </span>
                                                        <span class="elementor-button-text">View more</span>
                                                    </span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section class="elementor-section elementor-inner-section elementor-element elementor-element-8e637d0 elementor-section-boxed elementor-section-height-default elementor-section-height-default elementor-invisible" data-id="8e637d0" data-element_type="section" data-settings="{&quot;animation&quot;:&quot;fadeInRight&quot;}">
                        <div class="elementor-container elementor-column-gap-default" style="margin-bottom:50px">
                            @foreach (var recipe in latestrecipe)
                            {
                                i++;
                                if (i <= (latestrecipe.Count() / 2))
                                {
                                    @await  Component.InvokeAsync("LatestRecipe", new { item = recipe })
                                }
                            }
                        </div>
                    </section>
                    <section class="elementor-section elementor-inner-section elementor-element elementor-element-2035e13 elementor-section-boxed elementor-section-height-default elementor-section-height-default elementor-invisible" data-id="2035e13" data-element_type="section" data-settings="{&quot;animation&quot;:&quot;fadeInLeft&quot;}">
                        <div class="elementor-container elementor-column-gap-default">
                            @for (int j = (latestrecipe.Count() / 2); j < latestrecipe.Count(); j++)
                            {
                                var recipe = latestrecipe[j];
                                @await  Component.InvokeAsync("LatestRecipe", new { item = recipe })
                            }
                        </div>
                        <ul class ="listPage">
                            <li class="active">1</li>
                            <li>2</li>
                            <li>3</li>
                        </ul>
                    </section>
                </div>
            </div>
        </div>
    </section>
    
</div>

<script>

    let thisPage = 1;
    let limit = 100;
    let list = document.querySelectorAll('.elementor-container .bg-item');

    function loadItem() {
        let beginGet = limit * (thisPage - 1);
        let endGet = limit * thisPage - 1;
        list.forEach((item, key) => {
            if (key >= beginGet && key <= endGet) {
                item.style.display = 'block';
            } else {
                item.style.display = 'none';
            }
        })
        listPage();
    }
    loadItem();
    function listPage() {
        let count = Math.ceil(list.length / limit);
        document.querySelector('.listPage').innerHTML = '';

        if (thisPage != 1) {
            let prev = document.createElement('li');
            prev.innerText = 'PREV';
            prev.setAttribute('onclick', "changePage(" + (thisPage - 1) + ")");
            document.querySelector('.listPage').appendChild(prev);
        }

        for (i = 1; i <= count; i++) {
            let newPage = document.createElement('li');
            newPage.innerText = i;
            if (i == thisPage) {
                newPage.classList.add('active');
            }
            newPage.setAttribute('onclick', "changePage(" + i + ")");
            document.querySelector('.listPage').appendChild(newPage);
        }

        if (thisPage != count) {
            let next = document.createElement('li');
            next.innerText = 'NEXT';
            next.setAttribute('onclick', "changePage(" + (thisPage + 1) + ")");
            document.querySelector('.listPage').appendChild(next);
        }
    }
    function changePage(i) {
        thisPage = i;
        loadItem();
    }

</script>
